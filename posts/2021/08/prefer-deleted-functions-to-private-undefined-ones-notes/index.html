<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Prefer Deleted Functions to Private Undefined Ones (Notes) | Kushashwa Ravi Shrimali (Kush)</title><meta name=keywords content="development,coding,cpp,notes,deleted functions"><meta name=description content="Prefer deleted functions to private undefined ones
This item (11) in the chapter 3 focuses on:

Why and How to prevent users calling particular functions?
C++-98 and C++-11 approach
What&rsquo;s the difference between deleting a function vs declaring a member function private (and not defining them)?



NOTE
These are my notes on Chapter 3, Item 11 of Effective Modern C++ written by Scott Meyers.
Some (or even all) of the text can be similar to what you see in the book, as these are notes: I&rsquo;ve tried not to be unnecessarily creative with my words. :)"><meta name=author content="map[name:Kushashwa Ravi Shrimali]"><link rel=canonical href=https://krshrimali.github.io/posts/2021/08/prefer-deleted-functions-to-private-undefined-ones-notes/><link crossorigin=anonymous href=https://krshrimali.github.io/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css integrity="sha256-j+ECM6cGvIfy4Is8+XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as=style><link rel=icon href=https://krshrimali.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://krshrimali.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://krshrimali.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://krshrimali.github.io/apple-touch-icon.png><link rel=mask-icon href=https://krshrimali.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://krshrimali.github.io/posts/2021/08/prefer-deleted-functions-to-private-undefined-ones-notes/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://krshrimali.github.io/posts/2021/08/prefer-deleted-functions-to-private-undefined-ones-notes/"><meta property="og:site_name" content="Kushashwa Ravi Shrimali (Kush)"><meta property="og:title" content="Prefer Deleted Functions to Private Undefined Ones (Notes)"><meta property="og:description" content="Prefer deleted functions to private undefined ones This item (11) in the chapter 3 focuses on:
Why and How to prevent users calling particular functions? C++-98 and C++-11 approach What’s the difference between deleting a function vs declaring a member function private (and not defining them)? NOTE
These are my notes on Chapter 3, Item 11 of Effective Modern C++ written by Scott Meyers.
Some (or even all) of the text can be similar to what you see in the book, as these are notes: I’ve tried not to be unnecessarily creative with my words. :)"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-08-25T00:00:00+00:00"><meta property="article:modified_time" content="2021-08-25T00:00:00+00:00"><meta property="article:tag" content="Development"><meta property="article:tag" content="Coding"><meta property="article:tag" content="Cpp"><meta property="article:tag" content="Notes"><meta property="article:tag" content="Deleted Functions"><meta name=twitter:card content="summary"><meta name=twitter:title content="Prefer Deleted Functions to Private Undefined Ones (Notes)"><meta name=twitter:description content="Prefer deleted functions to private undefined ones
This item (11) in the chapter 3 focuses on:

Why and How to prevent users calling particular functions?
C++-98 and C++-11 approach
What&rsquo;s the difference between deleting a function vs declaring a member function private (and not defining them)?



NOTE
These are my notes on Chapter 3, Item 11 of Effective Modern C++ written by Scott Meyers.
Some (or even all) of the text can be similar to what you see in the book, as these are notes: I&rsquo;ve tried not to be unnecessarily creative with my words. :)"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://krshrimali.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Prefer Deleted Functions to Private Undefined Ones (Notes)","item":"https://krshrimali.github.io/posts/2021/08/prefer-deleted-functions-to-private-undefined-ones-notes/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Prefer Deleted Functions to Private Undefined Ones (Notes)","name":"Prefer Deleted Functions to Private Undefined Ones (Notes)","description":"Prefer deleted functions to private undefined ones This item (11) in the chapter 3 focuses on:\nWhy and How to prevent users calling particular functions? C++-98 and C++-11 approach What\u0026rsquo;s the difference between deleting a function vs declaring a member function private (and not defining them)? NOTE\nThese are my notes on Chapter 3, Item 11 of Effective Modern C++ written by Scott Meyers.\nSome (or even all) of the text can be similar to what you see in the book, as these are notes: I\u0026rsquo;ve tried not to be unnecessarily creative with my words. :)\n","keywords":["development","coding","cpp","notes","deleted functions"],"articleBody":"Prefer deleted functions to private undefined ones This item (11) in the chapter 3 focuses on:\nWhy and How to prevent users calling particular functions? C++-98 and C++-11 approach What’s the difference between deleting a function vs declaring a member function private (and not defining them)? NOTE\nThese are my notes on Chapter 3, Item 11 of Effective Modern C++ written by Scott Meyers.\nSome (or even all) of the text can be similar to what you see in the book, as these are notes: I’ve tried not to be unnecessarily creative with my words. :)\nWhen is it required to delete a function/not define a private member function? Problem:\nCases when you don’t want the client to call a particular function. Solution:\nJust don’t declare the function But…doesn’t work always:\nCase: Special member functions generated by C++ automatically, discussed later). Examples considered in this blog:\nCopy Constructor Copy Assignment Operator C++-98 Approach:\nDeclare these functions private and don’t define them.\nExample:\nAll istream and ostream objects inherit (possibly) from basic_ios class in the C++ Standard Library. Copying these objects is undersirable. Why is copying objects of istream and ostream undesirable? [Also see this question on stackoverflow]\nistream object: represents stream of input values. some might have been read before. and some may be read later. If you copy istream object: Will that copy those values which have been read before? Or will also copy values which are to be read later? Hence, it’s just better to not allow copying istream or ostream objects.\nIn C++-98: Reminder (from above): All istream and ostream objects inherit from basic_ios class (possibly) in the C++ standard, and the basic_ios class in C++-98 looks something like this:\ntemplate \u003cclass charT, class traits = char_traits\u003cT\u003e \u003e class basic_ios : public ios_base { public: // ... // Declaring the copy constructor and copy assignment operator private prohibits clients from calling them private: basic_ios(const basic_ios\u0026); // not defined basic_ios\u0026 operator=(const basic_ios\u0026); // not defined }; Note that:\nbasic_ios(const basic_ios\u0026) is the copy constructor basic_ios\u0026 operator=(const basic_ios\u0026) is the copy assignment operator (and both are private).\nHow does not defining these functions help?\nConsider a case where a friend class or member functions try accessing these functions, then linking will fail because of missing function definitions. In C++-11 In C++-11, the above can be done using = delete to mark the copy constructor and the copy assignment operator as deleted functions.\ntemplate \u003cclass charT, class traits = char_traits\u003ccharT\u003e \u003e class basic_ios : public ios_base { public: // ... basic_ios(const basic_ios\u0026 ) = delete; // deleted function basic_ios\u0026 operator=(const basic_ios\u0026) = delete; // deleted function // ... }; It’s a convention to declare deleted functions public, but why? Better error messages.\nIn case you declare your deleted functions private, some compilers will probably complain about the function being private and can hide the error message of it not being usable (because it being deleted). Hence, it’s a good practice to make them public:\nFrom my experience though, Apple’s clang compiler (v 12.0.5) doesn’t complain about it being private, but then - it can vary from compiler to compiler, so better to play safe. Here is an example of how the error message looks like:\n#include class Sample { public: Sample(int x) : x(x) { }; // Copy constructor has been deleted, so should not be callable Sample(const Sample\u0026) = delete; void trying_copy_construct(Sample s) { // This function tries to use a copy constructor // This should fail Sample new_object(s); } private: int x; }; Compiling the above code fails with the following error:\nmain.cpp:10:16: error: call to deleted constructor of 'Sample' Sample new_object(s); ^ ~ main.cpp:6:5: note: 'Sample' has been explicitly marked deleted here Sample(const Sample\u0026) = delete; Difference b/w using delete vs declaring private Note: There is more to it except the good practice reasoning.\nUsing a deleted function in a member function or by a friend class won’t even compile the code if it tries to copy basic_ios objects while declaring private will compile successfully but fail during link-time. Conventionally deleted functions are declared public, not private while the C++-98 way requires the functions to be declared private (see the section above for reasoning). Only member functions can be private, while any function can be deleted (so you can delete some overloads for your function, in case you don’t want it to accept certain type inputs). Let’s discuss the last point in detail:\nConsider the case where you have:\ntemplate\u003ctypename T\u003e void processPointer(T* ptr); And:\nYou need a template that works with built-in pointers. You want to reject calls with void* and char* pointers (more on this later, these deserve special handling at times). Ideal way? Delete these instantiations (with void* or char* input pointers). template\u003c\u003e void processPointer\u003cvoid\u003e(void*) = delete; template\u003c\u003e void processPointer\u003cchar\u003e(char*) = delete; But, with C++-98 way, it’s not possible within the class scope. That is, you can not give template specialization to your member function within the class scope (it should be done in the namespace scope):\nclass Sample { public: // ... template \u003ctypename T\u003e void processPointer(T* ptr) { ... } private: // ... // This is template specialization inside the scope of the class - not allowed template \u003c\u003e void processPointer\u003cvoid\u003e(void*); // error }; While with the C++-11 way, you can delete function outside the class scope:\nclass Sample { public: // ... template \u003ctypename T\u003e void processPointer(T* ptr) { ... } // ... }; template \u003c\u003e void Sample::processPointer\u003cvoid\u003e(void*) = delete; // in public scope, and deleted! I hope you liked this blog, thank you for reading! :)\n","wordCount":"927","inLanguage":"en","datePublished":"2021-08-25T00:00:00Z","dateModified":"2021-08-25T00:00:00Z","author":{"@type":"Person","name":{"name":"Kushashwa Ravi Shrimali"}},"mainEntityOfPage":{"@type":"WebPage","@id":"https://krshrimali.github.io/posts/2021/08/prefer-deleted-functions-to-private-undefined-ones-notes/"},"publisher":{"@type":"Organization","name":"Kushashwa Ravi Shrimali (Kush)","logo":{"@type":"ImageObject","url":"https://krshrimali.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://krshrimali.github.io/ accesskey=h title="Kushashwa Ravi Shrimali (Kush) (Alt + H)">Kushashwa Ravi Shrimali (Kush)</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://krshrimali.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://krshrimali.github.io/about title=About><span>About</span></a></li><li><a href=https://krshrimali.github.io/posts title=Blog><span>Blog</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://krshrimali.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://krshrimali.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Prefer Deleted Functions to Private Undefined Ones (Notes)</h1><div class=post-meta><span title='2021-08-25 00:00:00 +0000 UTC'>August 25, 2021</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;map[name:Kushashwa Ravi Shrimali]</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#prefer-deleted-functions-to-private-undefined-ones aria-label="Prefer deleted functions to private undefined ones">Prefer deleted functions to private undefined ones</a></li><li><a href=#in-c-98 aria-label="In C++-98:">In C++-98:</a></li><li><a href=#in-c-11 aria-label="In C++-11">In C++-11</a></li><li><a href=#difference-bw-using-delete-vs-declaring-private aria-label="Difference b/w using delete vs declaring private">Difference b/w using delete vs declaring private</a></li></ul></div></details></div><div class=post-content><h2 id=prefer-deleted-functions-to-private-undefined-ones>Prefer deleted functions to private undefined ones<a hidden class=anchor aria-hidden=true href=#prefer-deleted-functions-to-private-undefined-ones>#</a></h2><p>This item (11) in the chapter 3 focuses on:</p><ul><li>Why and How to prevent users calling particular functions?</li><li>C++-98 and C++-11 approach</li><li>What&rsquo;s the difference between deleting a function vs declaring a member function private (and not defining them)?</li></ul><p><img loading=lazy src=https://raw.githubusercontent.com/krshrimali/blog/main/assets/cover-images/Item-11-Notes.png></p><hr><p><strong>NOTE</strong></p><p>These are my notes on Chapter 3, Item 11 of Effective Modern C++ written by Scott Meyers.</p><p>Some (or even all) of the text can be similar to what you see in the book, as these are notes: I&rsquo;ve tried not to be unnecessarily creative with my words. :)</p><hr><ul><li>When is it required to delete a function/not define a private member function?</li></ul><p>Problem:</p><ul><li>Cases when you don&rsquo;t want the client to call a particular function.</li></ul><p>Solution:</p><ul><li>Just don&rsquo;t declare the function</li></ul><p>But&mldr;doesn&rsquo;t work always:</p><p><strong>Case:</strong> Special member functions generated by C++ automatically, discussed later). Examples considered in this blog:</p><ul><li>Copy Constructor</li><li>Copy Assignment Operator</li></ul><p><strong>C++-98 Approach</strong>:</p><ul><li><p>Declare these functions private and don&rsquo;t define them.</p></li><li><p><em>Example:</em></p><ul><li>All <code>istream</code> and <code>ostream</code> objects inherit (possibly) from <code>basic_ios</code> class in the C++ Standard Library.</li><li>Copying these objects is undersirable.</li></ul></li><li><p>Why is copying objects of <code>istream</code> and <code>ostream</code> undesirable? [Also see <a href=https://stackoverflow.com/questions/8785730/cannot-assign-or-copy-iostream-object>this</a> question on stackoverflow]</p><ul><li><code>istream</code> object: represents stream of input values.<ul><li>some might have been read before.</li><li>and some may be read later.</li></ul></li><li>If you copy <code>istream</code> object:<ul><li>Will that copy those values which have been read before?</li><li>Or will also copy values which are to be read later?</li></ul></li></ul></li></ul><p>Hence, it&rsquo;s just better to not allow copying <code>istream</code> or <code>ostream</code> objects.</p><h2 id=in-c-98>In C++-98:<a hidden class=anchor aria-hidden=true href=#in-c-98>#</a></h2><p>Reminder (from above): All <code>istream</code> and <code>ostream</code> objects inherit from <code>basic_ios</code> class (possibly) in the C++ standard, and the <code>basic_ios</code> class in C++-98 looks something like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;</span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>charT</span>, <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>traits</span> <span style=color:#f92672>=</span> char_traits<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>basic_ios</span> <span style=color:#f92672>:</span> <span style=color:#66d9ef>public</span> ios_base {
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Declaring the copy constructor and copy assignment operator private prohibits clients from calling them
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>private</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    basic_ios(<span style=color:#66d9ef>const</span> basic_ios<span style=color:#f92672>&amp;</span>);  <span style=color:#75715e>// not defined
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    basic_ios<span style=color:#f92672>&amp;</span> <span style=color:#66d9ef>operator</span><span style=color:#f92672>=</span>(<span style=color:#66d9ef>const</span> basic_ios<span style=color:#f92672>&amp;</span>);  <span style=color:#75715e>// not defined
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>};
</span></span></code></pre></div><p>Note that:</p><ul><li><code>basic_ios(const basic_ios&)</code> is the copy constructor</li><li><code>basic_ios& operator=(const basic_ios&)</code> is the copy assignment operator</li></ul><p>(and both are <code>private</code>).</p><p>How does <em>not defining</em> these functions help?</p><ul><li>Consider a case where a <code>friend</code> class or member functions try accessing these functions, then linking will fail because of missing function definitions.</li></ul><h2 id=in-c-11>In C++-11<a hidden class=anchor aria-hidden=true href=#in-c-11>#</a></h2><p>In C++-11, the above can be done using <code>= delete</code> to mark the copy constructor and the copy assignment operator as <em>deleted</em> functions.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;</span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>charT</span>, <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>traits</span> <span style=color:#f92672>=</span> char_traits<span style=color:#f92672>&lt;</span>charT<span style=color:#f92672>&gt;</span> <span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>basic_ios</span> <span style=color:#f92672>:</span> <span style=color:#66d9ef>public</span> ios_base {
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    basic_ios(<span style=color:#66d9ef>const</span> basic_ios<span style=color:#f92672>&amp;</span> ) <span style=color:#f92672>=</span> <span style=color:#66d9ef>delete</span>;  <span style=color:#75715e>// deleted function
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    basic_ios<span style=color:#f92672>&amp;</span> <span style=color:#66d9ef>operator</span><span style=color:#f92672>=</span>(<span style=color:#66d9ef>const</span> basic_ios<span style=color:#f92672>&amp;</span>) <span style=color:#f92672>=</span> <span style=color:#66d9ef>delete</span>;  <span style=color:#75715e>// deleted function
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>};
</span></span></code></pre></div><p>It&rsquo;s a convention to declare <em>deleted</em> functions <code>public</code>, but why? Better error messages.</p><p>In case you declare your <em>deleted</em> functions <code>private</code>, some compilers will probably complain about the function being <code>private</code> and can hide the error message of it not being usable (because it being <code>deleted</code>). Hence, it&rsquo;s a <em>good practice</em> to make them <code>public</code>:</p><p>From my experience though, Apple&rsquo;s clang compiler (v 12.0.5) doesn&rsquo;t complain about it being <code>private</code>, but then - it can vary from compiler to compiler, so better to play safe. Here is an example of how the error message looks like:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;iostream&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Sample</span> {
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    Sample(<span style=color:#66d9ef>int</span> x) <span style=color:#f92672>:</span> x(x) { };
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Copy constructor has been deleted, so should not be callable
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    Sample(<span style=color:#66d9ef>const</span> Sample<span style=color:#f92672>&amp;</span>) <span style=color:#f92672>=</span> <span style=color:#66d9ef>delete</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>trying_copy_construct</span>(Sample s) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// This function tries to use a copy constructor
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// This should fail
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        Sample new_object(s);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span><span style=color:#66d9ef>private</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> x;
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>Compiling the above code fails with the following error:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>main.cpp:<span style=color:#ae81ff>10</span><span style=color:#f92672>:</span><span style=color:#ae81ff>16</span><span style=color:#f92672>:</span> error: call to deleted constructor of <span style=color:#960050;background-color:#1e0010>&#39;</span>Sample<span style=color:#960050;background-color:#1e0010>&#39;</span>
</span></span><span style=display:flex><span>        Sample new_object(s);
</span></span><span style=display:flex><span>               <span style=color:#f92672>^</span>          <span style=color:#f92672>~</span>
</span></span><span style=display:flex><span>main.cpp:<span style=color:#ae81ff>6</span><span style=color:#f92672>:</span><span style=color:#ae81ff>5</span><span style=color:#f92672>:</span> note: <span style=color:#960050;background-color:#1e0010>&#39;</span>Sample<span style=color:#960050;background-color:#1e0010>&#39;</span> has been explicitly marked deleted here
</span></span><span style=display:flex><span>    Sample(<span style=color:#66d9ef>const</span> Sample<span style=color:#f92672>&amp;</span>) <span style=color:#f92672>=</span> <span style=color:#66d9ef>delete</span>;
</span></span></code></pre></div><h2 id=difference-bw-using-delete-vs-declaring-private>Difference b/w using delete vs declaring private<a hidden class=anchor aria-hidden=true href=#difference-bw-using-delete-vs-declaring-private>#</a></h2><p>Note: There is more to it except the <em>good practice</em> reasoning.</p><ul><li>Using a <em>deleted</em> function in a member function or by a <code>friend</code> class won&rsquo;t even compile the code if it tries to copy <code>basic_ios</code> objects <em>while</em> declaring <code>private</code> will compile successfully but fail during link-time.</li><li>Conventionally deleted functions are declared <code>public</code>, not <code>private</code> while the C++-98 way requires the functions to be declared private (see the section above for reasoning).</li><li>Only member functions can be private, while <em>any</em> function can be deleted (so you can delete some overloads for your function, in case you don&rsquo;t want it to accept certain type inputs).</li></ul><p>Let&rsquo;s discuss the last point in detail:</p><p>Consider the case where you have:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>template</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>typename</span> T<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> processPointer(T<span style=color:#f92672>*</span> ptr);
</span></span></code></pre></div><p>And:</p><ul><li>You need a template that works with built-in pointers. You want to reject calls with <code>void*</code> and <code>char*</code> pointers (more on this later, these deserve special handling at times).</li><li>Ideal way? Delete these instantiations (with <code>void*</code> or <code>char*</code> input pointers).</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>template</span><span style=color:#f92672>&lt;&gt;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> processPointer<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>void</span><span style=color:#f92672>&gt;</span>(<span style=color:#66d9ef>void</span><span style=color:#f92672>*</span>) <span style=color:#f92672>=</span> <span style=color:#66d9ef>delete</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>template</span><span style=color:#f92672>&lt;&gt;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> processPointer<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>char</span><span style=color:#f92672>&gt;</span>(<span style=color:#66d9ef>char</span><span style=color:#f92672>*</span>) <span style=color:#f92672>=</span> <span style=color:#66d9ef>delete</span>;
</span></span></code></pre></div><p>But, with C++-98 way, it&rsquo;s not possible within the class scope. That is, you can not give template specialization to your member function within the class scope (it should be done in the namespace scope):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Sample</span> {
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;</span><span style=color:#66d9ef>typename</span> T<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> processPointer(T<span style=color:#f92672>*</span> ptr)
</span></span><span style=display:flex><span>    { ... }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>private</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// This is template specialization inside the scope of the class - not allowed
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> processPointer<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>void</span><span style=color:#f92672>&gt;</span>(<span style=color:#66d9ef>void</span><span style=color:#f92672>*</span>);  <span style=color:#75715e>// error
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>};
</span></span></code></pre></div><p>While with the C++-11 way, you can delete function outside the <code>class</code> scope:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Sample</span> {
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;</span><span style=color:#66d9ef>typename</span> T<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> processPointer(T<span style=color:#f92672>*</span> ptr)
</span></span><span style=display:flex><span>    { ... }
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;&gt;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> Sample<span style=color:#f92672>::</span>processPointer<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>void</span><span style=color:#f92672>&gt;</span>(<span style=color:#66d9ef>void</span><span style=color:#f92672>*</span>) <span style=color:#f92672>=</span> <span style=color:#66d9ef>delete</span>;  <span style=color:#75715e>// in public scope, and deleted!
</span></span></span></code></pre></div><p>I hope you liked this blog, thank you for reading! :)</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://krshrimali.github.io/tags/development/>Development</a></li><li><a href=https://krshrimali.github.io/tags/coding/>Coding</a></li><li><a href=https://krshrimali.github.io/tags/cpp/>Cpp</a></li><li><a href=https://krshrimali.github.io/tags/notes/>Notes</a></li><li><a href=https://krshrimali.github.io/tags/deleted-functions/>Deleted Functions</a></li></ul><nav class=paginav><a class=prev href=https://krshrimali.github.io/posts/2021/09/declaring-overriding-functions-override-notes/><span class=title>« Prev</span><br><span>Declaring Overriding Functions override (Notes)</span>
</a><a class=next href=https://krshrimali.github.io/posts/2021/08/prefer-scoped-enums-over-unscoped-enums-notes/><span class=title>Next »</span><br><span>Prefer Scoped Enums over Unscoped Enums (Notes)</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Prefer Deleted Functions to Private Undefined Ones (Notes) on x" href="https://x.com/intent/tweet/?text=Prefer%20Deleted%20Functions%20to%20Private%20Undefined%20Ones%20%28Notes%29&amp;url=https%3a%2f%2fkrshrimali.github.io%2fposts%2f2021%2f08%2fprefer-deleted-functions-to-private-undefined-ones-notes%2f&amp;hashtags=development%2ccoding%2ccpp%2cnotes%2cdeletedfunctions"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Prefer Deleted Functions to Private Undefined Ones (Notes) on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fkrshrimali.github.io%2fposts%2f2021%2f08%2fprefer-deleted-functions-to-private-undefined-ones-notes%2f&amp;title=Prefer%20Deleted%20Functions%20to%20Private%20Undefined%20Ones%20%28Notes%29&amp;summary=Prefer%20Deleted%20Functions%20to%20Private%20Undefined%20Ones%20%28Notes%29&amp;source=https%3a%2f%2fkrshrimali.github.io%2fposts%2f2021%2f08%2fprefer-deleted-functions-to-private-undefined-ones-notes%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Prefer Deleted Functions to Private Undefined Ones (Notes) on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fkrshrimali.github.io%2fposts%2f2021%2f08%2fprefer-deleted-functions-to-private-undefined-ones-notes%2f&title=Prefer%20Deleted%20Functions%20to%20Private%20Undefined%20Ones%20%28Notes%29"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Prefer Deleted Functions to Private Undefined Ones (Notes) on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fkrshrimali.github.io%2fposts%2f2021%2f08%2fprefer-deleted-functions-to-private-undefined-ones-notes%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Prefer Deleted Functions to Private Undefined Ones (Notes) on whatsapp" href="https://api.whatsapp.com/send?text=Prefer%20Deleted%20Functions%20to%20Private%20Undefined%20Ones%20%28Notes%29%20-%20https%3a%2f%2fkrshrimali.github.io%2fposts%2f2021%2f08%2fprefer-deleted-functions-to-private-undefined-ones-notes%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Prefer Deleted Functions to Private Undefined Ones (Notes) on telegram" href="https://telegram.me/share/url?text=Prefer%20Deleted%20Functions%20to%20Private%20Undefined%20Ones%20%28Notes%29&amp;url=https%3a%2f%2fkrshrimali.github.io%2fposts%2f2021%2f08%2fprefer-deleted-functions-to-private-undefined-ones-notes%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Prefer Deleted Functions to Private Undefined Ones (Notes) on ycombinator" href="https://news.ycombinator.com/submitlink?t=Prefer%20Deleted%20Functions%20to%20Private%20Undefined%20Ones%20%28Notes%29&u=https%3a%2f%2fkrshrimali.github.io%2fposts%2f2021%2f08%2fprefer-deleted-functions-to-private-undefined-ones-notes%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>